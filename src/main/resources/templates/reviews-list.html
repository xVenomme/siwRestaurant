<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Tutte le Recensioni</title>
  <link rel="stylesheet" href="/css/general.css" />
</head>
<body>
  <div class="container reviews-page">
    <h1 class="page-title">Tutte le Recensioni</h1>

    <table class="reviews-table">
      <thead>
        <tr>
          <th>Utente</th>
          <th>Titolo</th>
          <th>Voto</th>
          <th>Commento</th>
          <th>Azioni</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="review : ${reviews}">
          <td th:text="${review.user.username}">username</td>
          <td th:text="${review.title}">Titolo recensione</td>
          <td>
            <span th:utext="${#strings.repeat('★', review.rating)} + ${#strings.repeat('☆', 5 - review.rating)}">★★★★★</span>
          </td>
          <td th:text="${review.content}">Testo recensione...</td>
          <td sec:authorize="hasAuthority('ADMIN')">
            <form th:action="@{'/reviews/' + ${review.id} + '/delete'}" method="post" 
                  onsubmit="return confirm('Sei sicuro di eliminare questa recensione?');">
              <button type="submit" class="button delete-button">Elimina</button>
            </form>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="reviews-actions">
      <a class="button" th:href="@{/}">← Torna alla Home</a>
    </div>
  </div>
</body>
</html>
